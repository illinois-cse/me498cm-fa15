<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8" />
<title>Exercise:  Partially Premixed Combustion</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="../css/style.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration -->

</head>
<body>
<div class="container" id="notebook-container">

<p><a href="http://cse.illinois.edu/"><img src="https://bytebucket.org/davis68/resources/raw/f7c98d2b95e961fae257707e22a58fa1a2c36bec/logos/baseline_cse_wdmk.png?token=be4cc41d4b2afe594f5b1570a3c5aad96a65f0d6" width="100%"/></a></p>
<h2 id="workflow">Exercise:  Partially Premixed Combustion</h2>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#ex-9-1">Exercise:  Partially Premixed Combustion</a><ul>
<li><a href="#ex-9-1-Intro">Introduction</a></li>
<li><a href="#ex-9-1-Problem">Problem Description</a></li>
<li><a href="#ex-9-1-Mesh">Mesh</a></li>
<li><a href="#ex-9-1-Setup">Physics Setup</a></li>
<li><a href="#ex-9-1-Materials">Materials</a></li>
<li><a href="#ex-9-1-BC">Boundary Conditions</a></li>
<li><a href="#ex-9-1-Numerical">Numercial Solution</a></li>
<li><a href="#ex-9-1-Post">Post-processing</a></li>
</ul>
</li>
<li><a href="#credits">Credits</a></li>
</ul>

<table><tr><td>
<hr>
<p><a id='ex-9-1'></a></p>
<h2 id="Exercise-9.1-Partially-Premixed-Combusion">Exercise:  Partially Premixed Combustion<a class="anchor-link" href="#Exercise-8.1-Supersonic-Flow-over-a-Wedge">&#182;</a></h2><hr>
<p><a id='ex-9-1-Intro'></a></p>
<h3 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">&#182;</a></h3><p>In this tutorial, you will learn how to set up and solve a turbulent reactive flow—particularly, a partially premixed combustion case, in which there are both premixed and non-premixed conditions. You will:</p>
<ol>
<li>Use the probability density function (PDF) method to track the mixture fraction and modeling the chemistry in the system (used for non-premixed, mixing combustion cases). </li>
<li>Learn the appropriate inputs and solver techniques using the turbulent Zimont Flame Speed model to close the turbulent quantities, typically used for premixed combustion cases. </li>
<li>Analyze the results of the system  </li>
</ol>
<p>The non-premixed combustion model solves transport equations for conserved scalars and mixture fractions. The amounts of chemical species present are derived from the predicted mixture fraction distribution, present in the precomputed PDF tables. These tables are generated by knowing the species that can be present, as well as the inflow conditions and properties of the mixture.</p>
<p>For the premixed combustion component which will be solved at simulation runtime, the Zimont turbulent flame speed model includes the laminar flame speed (which determines the chemistry of the system) and the flame front evolution due to turbulence. The assumption to use this model is that the turbulence lengthscale in the flame is smaller than the flame thickness (Karlovitz number $K_a$ $>$ $1$) where</p>
<p><img src="./img/lab9/ka.png" alt=""></p>
<p>Combining these two models is straightforward. The reaction progress variable $c$ is used to track the location of the flame, called the flame front. Before (to the left of) the flame front at $c$ $=$ $0$, the mixture is unburnt, and the mass fractions and other variables are computed using mixture the precomputed mixture fraction PDFs. Inside the flame, a combination of the two models is used. In the burnt area (to the right of the flame at $c$ $=$ $1$), the equilibrium mixture fraction is computed.</p>
<p>This method is typically limited to combustion systems that only contain $2$ inflow streams. Using swirl conditions on one of the streams is useful as it promotes mixing of the two streams; reducing problems with flame initialization and extinction.
The turbulence model that will be used is the $2$ equation $k$ $-$ $ε$ model.</p>
<hr>
<p><a id='ex-9-1-Problem'></a></p>
<h3 id="Problem-Description">Problem Description<a class="anchor-link" href="#Problem-Description">&#182;</a></h3><p><img src="./img/lab9/geom.png" alt=""></p>
<p>This is a partially premixed combustion case, which has inflows that reflect both premixed (fuel inflow) and no premixed (fuel and air mixing) conditions.<br>
The fuel ($CH_4$) and air mixture has an equivalence ratio of $0.8$, defined in the Physics Setup. It is injected at $T$ $=$ $300\,\text{K}$ with an axial velocity of $50\,\text{m/s}$ and swirl velocity (&#920; direction) of $30\,\text{m/s}$. The air inflow is at $T$ $=$ $650\,\text{K}$ and is injected at $10\,\text{m/s}$ axially, with no swirl. This case is axisymmetric and so the physical combustion chamber is assumed to be cylindrical; rotated about the axis of symmetry. The outflow is the pressure outlet at atmospheric pressure.</p>
<hr>
<p><a id='ex-9-1-Mesh'></a></p>
<h3 id="Mesh">Mesh<a class="anchor-link" href="#Mesh">&#182;</a></h3><ul>
<li>Download the <a href="./data/par-premixed.msh">mesh file</a> and extract the FLUENT mesh file.</li>
<li>Open Ansys Workbench. </li>
<li>Drag and drop a <em>Fluid Flow—Fluent</em> case into the main workbench area and save the project. </li>
<li>Double click on <code>Setup</code>, skipping the <code>Geometry</code> and <code>Mesh</code> options. In the pop-up dialogue, select the $2D$ and <code>Double Precision</code> options. </li>
<li>With FLUENT open, go to <code>File-Import-Mesh</code> and select the file that you just downloaded. </li>
<li>Go to <code>Solution Setup-General</code> and click <code>Display</code> under mesh options to show the mesh.<br>
It should look like this:</li>
</ul>
<p><img src="./img/lab9/mesh.png" alt=""></p>
<ul>
<li>If you go to <code>Mesh</code>-<code>Info</code>-<code>Size</code> at the top menu of the screen, there should be $4700$ cells in the domain.</li>
<li>The mesh was originally created in $inches$. </li>
<li>Click on <code>Scale</code> under the <code>Mesh</code> options then select <code>in</code> in the drop down box called <code>Mesh Was Created In</code>, then click <code>Scale</code> and close the dialogue box.</li>
</ul>
<p><img src="./img/lab9/scale.png" alt=""></p>
<ul>
<li>To speed up future computations, select <code>Mesh</code> -&gt; <code>Reorder</code> –&gt; <code>Domain</code> in the menu at the top of the screen.<br>
This increases memory access efficiency.</li>
</ul>
<hr>
<p><a id='ex-9-1-Setup'></a></p>
<h3 id="Physics-Setup">Physics Setup<a class="anchor-link" href="#Physics-Setup">&#182;</a></h3><ul>
<li>In the General tab, select <code>Axisymmetric Swirl</code> in the $2D$ space type. Keep the solver type as <code>Pressure based</code> to allow the premixed combustion model to be used.</li>
<li>In the Models tab, double click on the <code>Viscous</code> option to change it from <code>Viscous-Laminar</code> to <code>k-ε (2 eqn.)</code>. Do not change any other parameters in the viscous dialogue box. Click <code>Ok</code> and close the dialogue box.</li>
<li>Now double click on the <code>Species</code> option to edit it, and change the model from <code>Off</code> to <code>Partially Premixed Combustion</code>. </li>
<li>In the <code>Chemistry</code> tab, change the <code>Fuel Stream Rich Flammability Limit</code> to $1$.<br>
Changing this value means that FLUENT will perform equilibrium calculations at all mixture fractions ($1.0$ being the largest possible fraction). If this was not the case, the composition would be computed based on mixing instead, for fractions above the specified limit.</li>
</ul>
<p><img src="./img/lab9/species.png" alt=""></p>
<ul>
<li>Click on the <code>Boundary</code> tab. Enter the values as shown in the following image. </li>
</ul>
<p><img src="./img/lab9/boundary.png" alt=""></p>
<p>These values correspond to $CH_4$ (Methane) and air (nitrogen and oxygen) injected at a lean (less than $1.0$) equivalence ratio of &#934; $=$ $0.8$, representing the premixed fuel at $T$ $=$ $300\,\text{K}$. This ratio is defined as the ratio of the fuel to oxidizer ratio, to the fuel to oxidizer ratio at stoichiometric conditions. In addition, oxidizer (air) will be injected as a co-flow outside of the fuel stream, at $650\,\text{K}$. To add other species to the boundary, you would select the species you want and click <code>Add</code> under the <code>Boundary Species</code> options in this tab.</p>
<ul>
<li>Ignore the <code>Control and Flamelet</code> tabs, and select the <code>Table</code> tab. </li>
<li>Click <code>Calculate PDF Table</code> to generate the pre-computed PDF table denoting mixture fractions that will handle the non-premixed combustion analysis. </li>
<li>Investigate PDF table parameters and dependencies by clicking on <code>Display PDF Table</code>, selecting desired options, and clicking <code>Display</code>. </li>
<li>Click <code>Apply</code> and <code>OK</code> to close the <code>Species</code> dialogue box.</li>
<li>To write and save the PDF file that you just generated, go to <code>File-Export-PDF</code> at the menu at the top of the screen.</li>
</ul>
<hr>
<p><a id='ex-9-1-Materials'></a></p>
<h3 id="Materials">Materials<a class="anchor-link" href="#Materials">&#182;</a></h3><ul>
<li>In the <code>Materials</code> section, select the material <code>Mixture</code>, and click <code>Create/Edit</code>.   </li>
</ul>
<p>Note how Fluent has pre-selected the material as a mixture, and computes the density based on the PDF.</p>
<ul>
<li>Leave these pre-selected options. Click <code>Close</code>.</li>
</ul>
<hr>
<p><a id='ex-9-1-BC'></a></p>
<h3 id="Boundary-Conditions">Boundary Conditions<a class="anchor-link" href="#Boundary-Conditions">&#182;</a></h3><ul>
<li>In <code>Solution Setup</code> - <code>Boundary Conditions</code>, because this is a turbulent model, all turbulence parameters must be specified on the boundaries of the combustor.</li>
<li>Click to <code>edit</code> the zone <code>air</code> (a velocity inlet). Change the <code>Velocity Specification Method</code> to <code>Components</code>, and set the <code>Axial Velocity</code> at $10\,\text{m/s}$. </li>
<li>Change the <code>Specification Method</code> to <code>Intensity and Hydraulic diameter</code>, and adjust the turbulence parameters as in the dialogue. </li>
<li>Press <code>OK</code> once all the changes have been made.</li>
</ul>
<p><img src="./img/lab9/inlet.png" alt=""></p>
<ul>
<li>Similarly, edit the <code>air-fuel</code> boundary to have velocity components, with $50\,\text{m/s}$ axial velocity and $30\,\text{m/s}$ swirl velocity. </li>
<li>The turbulent intensity should be $10%$, but the hydraulic diameter should be $0.0254\,\text{m}$. </li>
</ul>
<p><img src="./img/lab9/inlet1.png" alt=""></p>
<ul>
<li>Clicking to the Species tab, change the mean mixture fraction to $1.0$.<br>
This is because this stream will be taken as the fuel stream, whereas the previous air boundary did not need to be set beyond the default value of $0$ for the oxidizer stream.</li>
<li>Click <code>Ok</code>.</li>
</ul>
<p><img src="./img/lab9/inlet2.png" alt=""></p>
<ul>
<li>Edit the <code>outlet</code> boundary condition, which is a pressure outlet. </li>
<li>Use $10%$ for <code>Backflow Turbulent Intensity</code>, and $0.13\,\text{m}$ for the <code>Backflow Hydraulic Diameter</code>.</li>
<li>Clicking to the <code>Species</code> tab, change the <code>Backflow Progress Variable</code> to $1$.<br>
This means that the boundary condition where the progress variable is $1.0$ will only be applied in the case that there is backflow from this outlet.</li>
</ul>
<p><img src="./img/lab9/outlet.png" alt=""></p>
<hr>
<p><a id='ex-9-1-Numerical'></a></p>
<h3 id="Numerical-Solution">Numerical Solution<a class="anchor-link" href="#Numerical-Solution">&#182;</a></h3><ul>
<li>Skipping to <code>Solution Controls</code>, click <code>Equations</code> and deselect the <code>Premixed Combustion</code> and <code>PDF</code> options so that the only equations solved for are <code>flow</code>, <code>swirl velocity</code>, and <code>turbulence</code> as a preliminary solution. Press <code>OK</code>. </li>
</ul>
<p><img src="./img/lab9/equations.png" alt=""></p>
<ul>
<li>Go to <code>Solution Initialization</code>. Press <code>Initialize</code>; let Fluent initialize the domain as a <code>Hybrid Initialization</code>, taking all boundaries into account. </li>
<li>Go to <code>Run Calculation</code>. Click on <code>Data File Quantities</code> and select all of the <code>mass fractions of species</code>, the <code>turbulent flame speed</code>, and the <code>stream function</code> (or click the button at the top right of the selection screen to select all if you would like to monitor other variables). Press <code>OK</code>.</li>
<li>Still on <code>Run Calculation</code>, enter $1000$ under the <code>Number of Iterations</code> and run the simulation until it converges.</li>
</ul>
<p>Now adapt a small region near the inlet with a progress variable of zero (this region will be entirely recalculated with combustion included)</p>
<ul>
<li>Go to <code>Adapt-Region</code> at the menus at the top of the page. </li>
<li>Select a small region near the <code>inlet</code>: $X$ from $0.1$ to $0.14\,\text{m}$, $Y$ from $0$ to $0.03\,\text{m}$.</li>
<li>Click <code>Mark</code>, which marks $207$ cells for refinement, and then click <code>Close</code>. </li>
</ul>
<p><img src="./img/lab9/region.png" alt=""></p>
<ul>
<li>Patch this region by going to <code>Solution Initialization</code>, and click <code>Patch</code>. </li>
<li>Select <code>Progress Variable</code> as the variable, and patch the region that you just marked by clicking <code>Patch</code>.</li>
<li>Close the dialogue after patching.</li>
</ul>
<p><img src="./img/lab9/patch.png" alt=""></p>
<ul>
<li>Now go back to <code>Solution Controls</code> and click <code>Equations</code>. </li>
<li>Reselect the <code>PDF</code> and <code>Premixed Combustion</code> options so that all options are highlighted and will be solved for. Press <code>OK</code>. </li>
<li>In Solution Methods, make sure that all solvers (<code>Momentum, Swirl Velocity, and Turbulent Kinetic Energy</code>) are set to a <code>Second Order Solver</code> scheme.</li>
<li>Go to <code>Run Calculation</code>. Press <code>Calculate</code>. </li>
<li>Allow the solution to converge (convergence criterion being that the residuals are all at least $1$x$10^{-3}$ or smaller). </li>
</ul>
<p><img src="./img/lab9/residuals.png" alt="" width="100%"></p>
<hr>
<p><a id='ex-9-1-Post'></a></p>
<h3 id="Post-processing">Post-processing<a class="anchor-link" href="#Post-processing">&#182;</a></h3><ul>
<li>In FLUENT, Save the project. </li>
<li>Double Click on <code>Load Results</code> Workbench which opens <code>CFD-Post</code>.</li>
<li>Create contours of:<ul>
<li>Stream Function</li>
<li>Progress Variable (called Reaction Progress)</li>
<li>Temperature</li>
<li>Mass Fraction of CH4</li>
<li>Turbulent Flame Speed</li>
</ul>
</li>
<li>To do this, click the <code>Contour</code> button at the top menu. </li>
<li>In the pop up dialogue box, name the contour after the variable that it will display and press <code>OK</code>. For all contour plots, select <code>periodic 1</code> for the location, and increase the number of contours to $51$. </li>
<li>Change the drop down box under <code>Variable</code> to the variable that you would like to create the contour of. </li>
<li>Press <code>Apply</code> to generate the contour, and repeat this process for all contours. </li>
</ul>
<p>Progress Variable:</p>
<p><img src="./img/lab9/progress.png" alt=""></p>
<p>Temperature:</p>
<p><img src="./img/lab9/temperature.png" alt=""></p>
<p>Mass Fraction of $CH_4$:</p>
<p><img src="./img/lab9/mass.png" alt=""></p>
<p>Turbulent Flame Speed:</p>
<p><img src="./img/lab9/speed.png" alt=""></p>
</td></tr></table>

<hr />
<h2 id="credits">Credits</h2>
<p>Sparsh Chadha, Neal Davis, and Zhongzhong Zhang developed these materials for <a href="http://cse.illinois.edu/">Computational Science and Engineering</a> at the University of Illinois at Urbana–Champaign.</p>
<p><img src="http://i.creativecommons.org/l/by-nc/4.0/88x31.png" align="left"> This content is available under a <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 Unported License</a>.</p>
<p><a href="http://cse.illinois.edu/"><img src="https://bytebucket.org/davis68/resources/raw/f7c98d2b95e961fae257707e22a58fa1a2c36bec/logos/baseline_cse_wdmk.png?token=be4cc41d4b2afe594f5b1570a3c5aad96a65f0d6" width="100%"/></a></p>
</body>
</html>
